/* Stili Generali e Variabili */
:root{--green-correct:#58cc02;--red-incorrect:#ff4b4b;--blue-action:#1cb0f6;--gray-light:#e5e5e5;--gray-medium:#afafaf;--gray-dark:#4b4b4b;--white:#ffffff;--font-family:'Nunito',sans-serif}
body{font-family:var(--font-family);background-color:#f7f7f7;color:var(--gray-dark);margin:0;padding:0;display:flex;flex-direction:column;align-items:center;min-height:100vh}
header{width:100%;background-color:var(--white);box-shadow:0 2px 4px rgba(0,0,0,.1);padding:.5rem 1.5rem;border-bottom:1px solid var(--gray-light);display:flex;justify-content:space-between;align-items:center;box-sizing:border-box}
header h1{color:var(--blue-action);font-weight:800;cursor:pointer;font-size:1.5rem}
.global-actions button{background:0 0;border:none;font-size:1.5rem;color:var(--gray-medium);cursor:pointer;margin-left:1rem}
.global-actions button:hover{color:var(--blue-action)}
main#app{width:100%;max-width:800px;padding:1.5rem;box-sizing:border-box}

/* Skill Tree Dashboard */
.skill-tree-container{padding:1rem}.skill-row{display:flex;justify-content:center;gap:2.5rem;margin-bottom:2.5rem}.skill-node{position:relative;cursor:pointer;text-align:center;transition:transform .2s ease}.skill-node:hover{transform:scale(1.05)}.skill-node .skill-icon-container{width:120px;height:120px;position:relative;display:flex;align-items:center;justify-content:center}.skill-node svg{width:100%;height:100%;transform:rotate(-90deg)}.skill-node .progress-ring-bg{stroke:var(--gray-light)}.skill-node .progress-ring{stroke:var(--blue-action);transition:stroke-dashoffset .5s ease,stroke .3s}.skill-node .skill-icon{position:absolute;font-size:3rem;color:var(--blue-action);transition:color .3s}.skill-node .skill-level{position:absolute;bottom:-10px;right:-5px;background:var(--white);border:2px solid var(--blue-action);border-radius:50%;width:30px;height:30px;display:flex;align-items:center;justify-content:center;font-weight:800;transition:border-color .3s}.skill-node h4{margin-top:.75rem;font-weight:700;color:var(--gray-dark)}
.skill-node.level-0 .progress-ring{stroke:#cccccc}.skill-node.level-0 .skill-icon{color:#cccccc}.skill-node.level-0 .skill-level{border-color:#cccccc}
.skill-node.level-1{--level-color:#cd7f32}.skill-node.level-2{--level-color:#c0c0c0}.skill-node.level-3{--level-color:#ffd700}.skill-node.level-4{--level-color:#47d1a5}.skill-node.level-5{--level-color:#b942f5}.skill-node[class*=level-]:not(.level-0) .progress-ring{stroke:var(--level-color)}.skill-node[class*=level-]:not(.level-0) .skill-icon{color:var(--level-color)}.skill-node[class*=level-]:not(.level-0) .skill-level{border-color:var(--level-color)}
.daily-review-btn{display:block;width:100%;padding:1.25rem;margin:1rem 0;font-size:1.2rem;font-weight:800;text-align:center;color:var(--white);background-color:var(--green-correct);border:none;border-radius:1rem;cursor:pointer;box-shadow:0 4px 0 #4aa401;transition:transform .1s,box-shadow .1s}.daily-review-btn:active{transform:translateY(2px);box-shadow:0 2px 0 #4aa401}.daily-review-btn.disabled{background-color:var(--gray-medium);box-shadow:0 4px 0 var(--gray-dark);cursor:not-allowed}

/* Stili Lezione */
.lesson-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;font-size:1.2rem;font-weight:700;color:var(--gray-medium)}.progress-bar-container{flex-grow:1;height:15px;background-color:var(--gray-light);border-radius:10px;margin:0 1rem;overflow:hidden}.progress-bar{height:100%;width:0;background-color:var(--blue-action);border-radius:10px;transition:width .3s ease}.question-container{background:var(--white);padding:2rem;border-radius:1rem;box-shadow:0 4px 10px rgba(0,0,0,.05)}.question-text{font-size:1.5rem;text-align:center;margin-bottom:2rem}.answer-options button{display:block;width:100%;padding:1rem;margin-bottom:1rem;font-size:1.1rem;font-weight:700;border:2px solid var(--gray-light);border-radius:.75rem;background-color:var(--white);cursor:pointer;transition:background-color .2s,border-color .2s}.answer-options button:hover{border-color:var(--blue-action)}.answer-options button.correct{background-color:#d7ffb8;border-color:var(--green-correct);color:#3c7800}.answer-options button.incorrect{background-color:#ffdede;border-color:var(--red-incorrect);color:#a80000}.answer-options button.disabled{pointer-events:none}textarea#open-answer-input{width:100%;min-height:100px;font-size:1rem;padding:1rem;border-radius:.75rem;border:2px solid var(--gray-light);box-sizing:border-box;resize:vertical}.lesson-footer{margin-top:1.5rem;display:flex;justify-content:space-between;align-items:center}.hint-btn,#check-answer-btn,#next-question-btn{padding:.75rem 1.5rem;border:none;border-radius:.75rem;font-weight:700;cursor:pointer}.hint-btn{background-color:transparent;border:2px solid var(--blue-action);color:var(--blue-action)}#check-answer-btn,#next-question-btn{background-color:var(--blue-action);color:var(--white);min-width:120px}.timer-bar-container{height:8px;width:100%;background-color:var(--gray-light);border-radius:4px;margin-top:1rem;overflow:hidden}.timer-bar{height:100%;width:100%;background-color:var(--green-correct)}

/* Modali */
.modal-container{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.6);display:flex;justify-content:center;align-items:center;z-index:1000;opacity:0;pointer-events:none;transition:opacity .3s ease}.modal-container:not(.hidden){opacity:1;pointer-events:auto}.modal-content{background:var(--white);padding:2rem;border-radius:1rem;max-width:500px;width:90%;position:relative;box-shadow:0 5px 20px rgba(0,0,0,.2);transform:scale(.9);transition:transform .3s ease}.modal-container:not(.hidden) .modal-content{transform:scale(1)}.modal-content.large{max-width:700px}.close-btn{position:absolute;top:.5rem;right:1rem;font-size:2.5rem;font-weight:700;color:var(--gray-medium);cursor:pointer}
#search-modal-input{width:100%;padding:1rem;font-size:1rem;border-radius:.5rem;border:2px solid var(--gray-light);box-sizing:border-box;margin-bottom:1rem}#search-modal-results{max-height:60vh;overflow-y:auto}
.search-result-item{padding:1rem;border-bottom:1px solid var(--gray-light)}.search-result-item p{margin:.5rem 0}.search-result-item .question{font-weight:700}.search-result-item .answer,.search-result-item .explanation{font-style:italic;color:var(--gray-dark);margin-top:.5rem;background:#f8f9fa;padding:.5rem;border-radius:.5rem}

/* Statistiche Avanzate */
.stats-container{display:flex;flex-direction:column;gap:1.5rem}.stats-header{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem}.stat-card{background-color:var(--white);padding:1.5rem;border-radius:1rem;text-align:center;border:2px solid var(--gray-light)}.stat-card .value{font-size:2.5rem;font-weight:800;color:var(--blue-action)}.stat-card .value.green{color:var(--green-correct)}.stat-card .value .unit{font-size:1.2rem;color:var(--gray-medium)}.stat-card .label{font-weight:700;color:var(--gray-dark)}
.stats-section{background:var(--white);border-radius:1rem;padding:1.5rem}.stats-section h3{text-align:center;font-size:1.5rem;margin-top:0;margin-bottom:1.5rem;color:var(--gray-dark)}.stat-item{margin-bottom:1rem}.stat-item-header{display:flex;justify-content:space-between;font-weight:700;margin-bottom:.5rem}
.toughest-questions-list li{background-color:#fff8f8;border:1px solid #ffe0e0;border-radius:.5rem;padding:1rem;margin-bottom:.5rem;list-style-type:none;cursor:pointer;transition:background-color .2s}.toughest-questions-list li:hover{background-color:#ffeded}

/* Report Fine Test */
.test-report-item{margin-bottom:1.5rem;padding:1rem;border-radius:.5rem}.test-report-item.correct{background-color:#f0fff0;border-left:5px solid var(--green-correct)}.test-report-item.incorrect{background-color:#fff8f8;border-left:5px solid var(--red-incorrect)}.report-q-text{font-weight:700}.report-user-answer{font-style:italic}.report-explanation{margin-top:.5rem;padding-top:.5rem;border-top:1px solid var(--gray-light);font-size:.9rem}

.loader{border:8px solid var(--gray-light);border-top:8px solid var(--blue-action);border-radius:50%;width:60px;height:60px;animation:spin 1s linear infinite;margin:4rem auto}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
.visually-hidden{display:none!important}

/* ... (All previous styles) ... */
/* Include the new styles for Bio-Ritmo, Achievements, and the PC Counter */
.header-stats{font-size:1.5rem;font-weight:800;color:var(--blue-action)}
#pc-counter i{color:#ffd700}
/* Achievement Toast Notification */
#toast-notification{position:fixed;top:20px;left:50%;transform:translateX(-50%);background-color:rgba(0,0,0,.8);color:var(--white);padding:1rem 2rem;border-radius:2rem;font-weight:700;z-index:2000;opacity:0;transition:opacity .5s,top .5s;pointer-events:none}
#toast-notification.show{top:40px;opacity:1}
/* Bio-Ritmo Streak Graph */
.streak-calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:.5rem;text-align:center}.streak-calendar .day-name{font-weight:700;color:var(--gray-medium)}.streak-calendar .day{width:35px;height:35px;border-radius:50%;display:flex;align-items:center;justify-content:center;background-color:var(--gray-light)}.streak-calendar .day.active{background-color:var(--green-correct);color:var(--white);font-weight:700}.streak-calendar .day.today{border:2px solid var(--blue-action)}
/* Badge/Achievement Styles */
.achievements-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(80px,1fr));gap:1rem}.achievement-badge{text-align:center}.achievement-badge i{font-size:3rem;color:var(--gray-light);transition:color .3s,transform .3s}.achievement-badge.unlocked i{color:#ffd700;transform:scale(1.1)}.achievement-badge p{font-size:.8rem;font-weight:700;color:var(--gray-medium);margin-top:.5rem}.achievement-badge.unlocked p{color:var(--gray-dark)}
